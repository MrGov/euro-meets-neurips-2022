#!/bin/bash

DIR_MODELS="./models/"
NUM_PERTURBATIONS=20
SD_PERTURBATION=1
LEARNING_RATE=0.01
TIME_LIMIT=90

FEATURE_SET="dynamicstatic"
PREDICTOR="NeuralNetwork"
SAMPLESIZE=50
NUMINSTANCES=15
RUNTIMESTRATEGY=3600

# BASE CASE
DIR_ORACLE="../experiments/samples-${SAMPLESIZE}_instances-${NUMINSTANCES}_runtime-${RUNTIMESTRATEGY}/"
echo basecase
sbatch --job-name="base" --export=DIR_ORACLE=$DIR_ORACLE,DIR_MODELS=$DIR_MODELS,NUM_PERTURBATIONS=$NUM_PERTURBATIONS,SD_PERTURBATION=$SD_PERTURBATION,TIME_LIMIT=$TIME_LIMIT,LEARNING_RATE=$LEARNING_RATE,PREDICTOR=$PREDICTOR,FEATURE_SET=$FEATURE_SET run_training.sh


# EXPERIMENT 1 
for SAMPLESIZE in 10 25 75 100
do
	DIR_ORACLE="../experiments/samples-${SAMPLESIZE}_instances-${NUMINSTANCES}_runtime-${RUNTIMESTRATEGY}/"
	echo experiment1
	sbatch --job-name="exp1" --export=DIR_ORACLE=$DIR_ORACLE,DIR_MODELS=$DIR_MODELS,NUM_PERTURBATIONS=$NUM_PERTURBATIONS,SD_PERTURBATION=$SD_PERTURBATION,TIME_LIMIT=$TIME_LIMIT,LEARNING_RATE=$LEARNING_RATE,PREDICTOR=$PREDICTOR,FEATURE_SET=$FEATURE_SET run_training.sh
done
sleep 1
SAMPLESIZE=50


# EXPERIMENT 2
for NUMINSTANCES in 1 2 5 10 20 25 30
do
	DIR_ORACLE="../experiments/samples-${SAMPLESIZE}_instances-${NUMINSTANCES}_runtime-${RUNTIMESTRATEGY}/"
	echo experiment2
	sbatch --job-name="exp2" --export=DIR_ORACLE=$DIR_ORACLE,DIR_MODELS=$DIR_MODELS,NUM_PERTURBATIONS=$NUM_PERTURBATIONS,SD_PERTURBATION=$SD_PERTURBATION,TIME_LIMIT=$TIME_LIMIT,LEARNING_RATE=$LEARNING_RATE,PREDICTOR=$PREDICTOR,FEATURE_SET=$FEATURE_SET run_training.sh
done
sleep 1
NUMINSTANCES=15


# EXPERIMENT 3
for RUNTIMESTRATEGY in 60 120 180 240 300 900 "bestSeed"
do
	DIR_ORACLE="../experiments/samples-${SAMPLESIZE}_instances-${NUMINSTANCES}_runtime-${RUNTIMESTRATEGY}/"
	echo experiment3
	sbatch --job-name="exp3" --export=DIR_ORACLE=$DIR_ORACLE,DIR_MODELS=$DIR_MODELS,NUM_PERTURBATIONS=$NUM_PERTURBATIONS,SD_PERTURBATION=$SD_PERTURBATION,TIME_LIMIT=$TIME_LIMIT,LEARNING_RATE=$LEARNING_RATE,PREDICTOR=$PREDICTOR,FEATURE_SET=$FEATURE_SET run_training.sh
done
sleep 1
RUNTIMESTRATEGY=3600


# EXPERIMENT 4
for FEATURE_SET in "dynamic" "static"
do
	DIR_ORACLE="../experiments/samples-${SAMPLESIZE}_instances-${NUMINSTANCES}_runtime-${RUNTIMESTRATEGY}/"
	echo experiment4
	sbatch --job-name="exp4" --export=DIR_ORACLE=$DIR_ORACLE,DIR_MODELS=$DIR_MODELS,NUM_PERTURBATIONS=$NUM_PERTURBATIONS,SD_PERTURBATION=$SD_PERTURBATION,TIME_LIMIT=$TIME_LIMIT,LEARNING_RATE=$LEARNING_RATE,PREDICTOR=$PREDICTOR,FEATURE_SET=$FEATURE_SET run_training.sh
done
FEATURE_SET="dynamicstatic"
sleep 1


# EXPERIMENT 5
for PREDICTOR in "GraphNeuralNetwork" "Linear" "GraphNeuralNetwork_sparse"
do
	DIR_ORACLE="../experiments/samples-${SAMPLESIZE}_instances-${NUMINSTANCES}_runtime-${RUNTIMESTRATEGY}/"
	echo experiment5
	sbatch --job-name="exp5" --export=DIR_ORACLE=$DIR_ORACLE,DIR_MODELS=$DIR_MODELS,NUM_PERTURBATIONS=$NUM_PERTURBATIONS,SD_PERTURBATION=$SD_PERTURBATION,TIME_LIMIT=$TIME_LIMIT,LEARNING_RATE=$LEARNING_RATE,PREDICTOR=$PREDICTOR,FEATURE_SET=$FEATURE_SET run_training.sh
done
PREDICTOR="NeuralNetwork"



