#!/bin/bash


TIME_LIMIT=90
INSTANCE_DIRECTORY="./validation_instances/"
STRATEGY="NeuralNetwork"
RESULT_DIRECTORY="./results/results_validation/"
INSTANCE_SEEDS="1000"
DIR_MODELS="../training/models/"

FEATURE_SET="dynamicstatic"
SAMPLESIZE=50
NUMINSTANCES=15
RUNTIMESTRATEGY=3600


TRAINING_ITERATIONS="1 2 4 6 8 10 15 20 25 30 35 40"

# BASE CASE
sbatch --job-name="vbase" --export=STRATEGY=$STRATEGY,TIME_LIMIT=$TIME_LIMIT,INSTANCE_DIRECTORY=$INSTANCE_DIRECTORY,RESULT_DIRECTORY=$RESULT_DIRECTORY,INSTANCE_SEEDS="${INSTANCE_SEEDS}",DIR_MODELS=$DIR_MODELS,TRAINING_ITERATIONS="${TRAINING_ITERATIONS}",SAMPLESIZE=$SAMPLESIZE,NUMINSTANCES=$NUMINSTANCES,RUNTIMESTRATEGY=$RUNTIMESTRATEGY,FEATURE_SET=$FEATURE_SET run_solve_bound.sh


# EXPERIMENT 1 
for SAMPLESIZE in 10 25 75 100
do
	sbatch --job-name="vexp1" --export=STRATEGY=$STRATEGY,TIME_LIMIT=$TIME_LIMIT,INSTANCE_DIRECTORY=$INSTANCE_DIRECTORY,RESULT_DIRECTORY=$RESULT_DIRECTORY,INSTANCE_SEEDS="${INSTANCE_SEEDS}",DIR_MODELS=$DIR_MODELS,TRAINING_ITERATIONS="${TRAINING_ITERATIONS}",SAMPLESIZE=$SAMPLESIZE,NUMINSTANCES=$NUMINSTANCES,RUNTIMESTRATEGY=$RUNTIMESTRATEGY,FEATURE_SET=$FEATURE_SET run_solve_bound.sh
done
SAMPLESIZE=50
sleep 1


# EXPERIMENT 2
for NUMINSTANCES in 1 2 5 10 20 25 30
do
	sbatch --job-name="vexp2" --export=STRATEGY=$STRATEGY,TIME_LIMIT=$TIME_LIMIT,INSTANCE_DIRECTORY=$INSTANCE_DIRECTORY,RESULT_DIRECTORY=$RESULT_DIRECTORY,INSTANCE_SEEDS="${INSTANCE_SEEDS}",DIR_MODELS=$DIR_MODELS,TRAINING_ITERATIONS="${TRAINING_ITERATIONS}",SAMPLESIZE=$SAMPLESIZE,NUMINSTANCES=$NUMINSTANCES,RUNTIMESTRATEGY=$RUNTIMESTRATEGY,FEATURE_SET=$FEATURE_SET run_solve_bound.sh
done
NUMINSTANCES=15
sleep 1

# EXPERIMENT 3
for RUNTIMESTRATEGY in 60 120 180 240 300 900 "bestSeed"
do
	sbatch --job-name="vexp3" --export=STRATEGY=$STRATEGY,TIME_LIMIT=$TIME_LIMIT,INSTANCE_DIRECTORY=$INSTANCE_DIRECTORY,RESULT_DIRECTORY=$RESULT_DIRECTORY,INSTANCE_SEEDS="${INSTANCE_SEEDS}",DIR_MODELS=$DIR_MODELS,TRAINING_ITERATIONS="${TRAINING_ITERATIONS}",SAMPLESIZE=$SAMPLESIZE,NUMINSTANCES=$NUMINSTANCES,RUNTIMESTRATEGY=$RUNTIMESTRATEGY,FEATURE_SET=$FEATURE_SET run_solve_bound.sh
done
RUNTIMESTRATEGY=3600
sleep 1


# EXPERIMENT 4
for FEATURE_SET in "static" "dynamic"
do
	sbatch --job-name="vexp4" --export=STRATEGY=$STRATEGY,TIME_LIMIT=$TIME_LIMIT,INSTANCE_DIRECTORY=$INSTANCE_DIRECTORY,RESULT_DIRECTORY=$RESULT_DIRECTORY,INSTANCE_SEEDS="${INSTANCE_SEEDS}",DIR_MODELS=$DIR_MODELS,TRAINING_ITERATIONS="${TRAINING_ITERATIONS}",SAMPLESIZE=$SAMPLESIZE,NUMINSTANCES=$NUMINSTANCES,RUNTIMESTRATEGY=$RUNTIMESTRATEGY,FEATURE_SET=$FEATURE_SET run_solve_bound.sh
done
FEATURE_SET="dynamicstatic"
sleep 1


# EXPERIMENT 5
for STRATEGY in "GraphNeuralNetwork" "Linear" "GraphNeuralNetwork_sparse"
do
	sbatch --job-name="vexp5" --export=STRATEGY=$STRATEGY,INSTANCE_DIRECTORY,TIME_LIMIT=$TIME_LIMIT,INSTANCE_DIRECTORY=$INSTANCE_DIRECTORY,RESULT_DIRECTORY=$RESULT_DIRECTORY,INSTANCE_SEEDS="${INSTANCE_SEEDS}",DIR_MODELS=$DIR_MODELS,TRAINING_ITERATIONS="${TRAINING_ITERATIONS}",SAMPLESIZE=$SAMPLESIZE,NUMINSTANCES=$NUMINSTANCES,RUNTIMESTRATEGY=$RUNTIMESTRATEGY,FEATURE_SET=$FEATURE_SET run_solve_bound.sh
done
STRATEGY="NeuralNetwork"





